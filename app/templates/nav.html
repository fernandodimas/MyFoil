<nav class="navbar is-fixed-top shadow-sm" role="navigation" aria-label="main navigation">
    <div class="container is-fluid px-5">
        <div class="navbar-brand">
            <a class="navbar-item has-text-weight-black is-size-4 tracking-tighter" href="/">
                <span class="has-text-primary">My</span>Foil
            </a>

            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMain">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div id="navbarMain" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item {% if title=='Library' %}is-active{% endif %}" href="/">
                    <i class="bi bi-collection-play mr-2"></i> {{ t('Biblioteca') }}
                </a>

                <a class="navbar-item {% if title=='Statistics' %}is-active{% endif %}" href="/stats">
                    <i class="bi bi-bar-chart mr-2"></i> {{ t('Estatísticas') }}
                </a>

                <a class="navbar-item {% if title=='Wishlist' %}is-active{% endif %}" href="/wishlist">
                    <i class="bi bi-heart mr-2"></i> {{ t('Wishlist') }}
                </a>

                {% if current_user.is_admin or admin_account_created == false %}
                <a class="navbar-item {% if title=='Settings' %}is-active{% endif %}" href="/settings">
                    <i class="bi bi-sliders mr-2"></i> {{ t('Configurações') }}
                </a>
                {% endif %}
            </div>

            <div class="navbar-end">
                <!-- Status Indicator -->
                <div class="navbar-item px-2" id="systemStatusIndicator">
                    <div class="status-badge is-clickable" onclick="openStatusModal()">
                        <div class="is-flex is-align-items-center">
                            <span class="icon mr-2" id="statusIcon">
                                <i class="bi bi-check-circle has-text-success"></i>
                            </span>
                            <span class="is-size-7 has-text-weight-bold" id="statusText">System Idle</span>
                        </div>
                        <!-- Progress bar (hidden when idle) -->
                        <div class="progress-container is-hidden" id="statusProgress">
                            <progress class="progress is-small is-primary" value="0" max="100"
                                id="progressBar">0%</progress>
                        </div>
                    </div>
                </div>
                {% if title == 'Library' %}
                <div class="navbar-item">
                    <div class="control has-icons-right">
                        <input class="input is-rounded is-small" id="navbarSearch" type="text"
                            placeholder="{{ t('Buscar jogos...') }}" list="gameTitlesList"
                            oninput="toggleSearchClearBtn()">
                        <span class="icon is-small is-right" id="searchIcon">
                            <i class="bi bi-search"></i>
                        </span>
                        <span class="icon is-small is-right is-clickable" id="searchClearBtn"
                            style="display: none; pointer-events: auto; cursor: pointer;" onclick="clearSearch()">
                            <i class="bi bi-x"></i>
                        </span>
                        <datalist id="gameTitlesList"></datalist>
                    </div>
                </div>
                {% endif %}

                <div class="navbar-item">
                    <div class="buttons">
                        <button class="button is-ghost is-small" id="themeToggle" onclick="toggleTheme()"
                            title="{{ t('Alternar Tema') }}">
                            <span class="icon">
                                <i class="bi bi-circle-half"></i>
                            </span>
                        </button>

                        {% if current_user.is_authenticated %}
                        <a href="/logout" class="button is-light is-small">
                            <strong>{{ t('Sair') }}</strong>
                        </a>
                        {% else %}
                        <a href="/login" class="button is-primary is-small">
                            <strong>{{ t('Entrar') }}</strong>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<script src="/static/js/nav.js?v={{ build_version }}"></script>